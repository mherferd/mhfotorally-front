<div class="container mt-4">
  <h2>Añadir Nuevo Usuario</h2>
  
  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>
  
  <form [formGroup]="usuarioForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-md-6 mb-3">
        <label class="form-label">Nombre *</label>
        <input type="text" class="form-control" formControlName="nombre">
        <div *ngIf="usuarioForm.get('nombre')?.invalid && usuarioForm.get('nombre')?.touched" 
             class="text-danger">
          Nombre es requerido
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">Apellidos *</label>
        <input type="text" class="form-control" formControlName="apellidos">
        <div *ngIf="usuarioForm.get('apellidos')?.invalid && usuarioForm.get('apellidos')?.touched" 
             class="text-danger">
          Apellidos son requeridos
        </div>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Email *</label>
      <input type="email" class="form-control" formControlName="email">
      <div *ngIf="usuarioForm.get('email')?.invalid && usuarioForm.get('email')?.touched" 
           class="text-danger">
        Ingresa un email válido
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label class="form-label">Teléfono</label>
        <input type="tel" class="form-control" formControlName="telefono">
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">Fecha Nacimiento</label>
        <input type="date" class="form-control" formControlName="fecha_nacimiento">
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Contraseña *</label>
      <input type="password" class="form-control" formControlName="password">
      <div *ngIf="usuarioForm.get('password')?.invalid && usuarioForm.get('password')?.touched" 
           class="text-danger">
        Mínimo 8 caracteres
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Rol *</label>
      <select class="form-select" formControlName="rol">
        <option value="participante">Participante</option>
        <option value="admin">Administrador</option>
      </select>
    </div>

    <div class="d-flex justify-content-between">
      <button type="button" class="btn btn-secondary" 
              (click)="cancelar()">
        Cancelar
      </button>
      <button type="submit" class="btn btn-primary" 
              [disabled]="usuarioForm.invalid || cargando">
        <span *ngIf="!cargando">Guardar Usuario</span>
        <span *ngIf="cargando" class="spinner-border spinner-border-sm"></span>
      </button>
    </div>
  </form>
</div>